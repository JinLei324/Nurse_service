{"version":3,"sources":["../../src/pages/login/login.module.ts","../../src/pages/login/login.ts"],"names":[],"mappings":"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","file":"38.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { LoginPage } from './login';\n\n\n@NgModule({\n  declarations: [\n    LoginPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(LoginPage),\n  ],\n})\nexport class LoginPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/login.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, Loading, NavController, NavParams, AlertController, LoadingController, Events } from 'ionic-angular';\n//import { TermsusePage} from \"../termsuse/termsuse\";\nimport { FormBuilder, FormGroup, Validators, AbstractControl } from '@angular/forms';\nimport { UserServiceProvider } from \"../../providers/user-service/user-service\";\n//import { ForgotPasswordPage} from \"../forgot-password/forgot-password\";\nimport * as $ from 'jquery'\n//import { NursingselectPage} from \"../nursingselect/nursingselect\";\n//import { SignupPage } from '../signup/signup';\nimport { CallNumber } from '@ionic-native/call-number';\nimport { Facebook, FacebookLoginResponse } from '@ionic-native/facebook';\nimport { Geolocation } from \"@ionic-native/geolocation\";\nimport { UniqueDeviceID } from '@ionic-native/unique-device-id';\nimport { FCM } from '@ionic-native/fcm';\n/**\n * Generated class for the LoginPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation..\n * 3\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-login',\n  templateUrl: 'login.html',\n})\nexport class LoginPage {\n  isLoggedIn: boolean = false;\n  users: any;\n  authForm: FormGroup;\n  loading: Loading;\n  FB_APP_ID: any = 2276720275901192;\n  fbEmail: string\n  fbUserId: string\n  fbUserName: any\n  fbImg: any;\n  public lat: any;\n  public long: any;\n  public loading1: any;\n  public firstname: any;\n  public lastname: any;\n  public udid: any;\n\n\n  constructor(\n    public navCtrl: NavController,\n    public navParams: NavParams,\n    public formBuilder: FormBuilder,\n    public userServices: UserServiceProvider,\n    public events: Events,\n    private alertCtrl: AlertController,\n    private loadingCtrl: LoadingController,\n    public geolocation: Geolocation,\n    public fb: Facebook,\n    private uniqueDeviceID: UniqueDeviceID,\n    public fcm: FCM\n  ) {\n\n\n    this.geolocation.getCurrentPosition().then((position) => {\n      //   this.uniqueDeviceID.get()\n      // .then((uuid: any)=>{\n      //  this.udid = uuid;\n      // console.log(\"udid\",this.udid)\n\n      // })\n\n      this.lat = position.coords.latitude;\n      this.long = position.coords.longitude;\n      localStorage.setItem('lat', this.lat)\n      localStorage.setItem('long', this.long);\n\n      console.log(\"lattitute\", position.coords.latitude);\n      console.log(\"lattitute\", position.coords.longitude);\n\n    });\n\n\n    fb.getLoginStatus()\n      .then(res => {\n        console.log(res.status);\n        if (res.status === \"connect\") {\n          this.isLoggedIn = true;\n        } else {\n          this.isLoggedIn = false;\n        }\n      })\n      .catch(e => console.log(e));\n\n    this.authForm = formBuilder.group({\n\n      email: ['', Validators.compose([Validators.required, Validators.pattern('^[A-Z0-9a-z._%+-]+@([A-Za-z0-9-]+.)+[A-Za-z]{2,4}$')])],\n      password: ['', Validators.compose([Validators.required, Validators.minLength(3)])],\n\n    });\n\n\n  }\n\n\n\n\n  ionViewDidLoad() {\n    this.fcm.getToken().then(token => {\n      console.log(\"device token\", token);\n      this.udid = token;\n    })\n    this.loading1 = this.loadingCtrl.create({\n      content: 'Please wait...'\n    });\n    console.log('ionViewDidLoad LoginPage');\n  }\n\n  forgotPass() {\n    this.navCtrl.push('ForgotPasswordPage');\n  }\n\n  showLoading() {\n    this.loading = this.loadingCtrl.create({\n      content: 'Please wait...',\n      //dismissOnPageChange: true\n    });\n    this.loading.present();\n  }\n\n\n  showError(text) {\n    this.loading.dismiss();\n\n    let alert = this.alertCtrl.create({\n\n      subTitle: text,\n      buttons: ['OK']\n    });\n    alert.present();\n  }\n\n\n\n  onSubmit(value: any): void {\n\n    console.log(value);\n    if (this.authForm.valid) {\n      this.showLoading()\n\n      this.userServices.login(value, this.lat, this.long, this.udid).subscribe(datas => {\n        console.log(datas);\n        if (datas.message === 'successfull') {\n          localStorage.setItem('user_mobile', datas.result.phone_number);\n          localStorage.setItem('user_address', datas.result.address);\n          this.events.publish('user_id', datas.result.id)\n          localStorage.setItem('user_id', datas.result.id);\n          this.loading.dismiss();\n          this.navCtrl.setRoot('NursingselectPage');\n        } else if (datas.result) {\n          this.showError(datas.result);\n        }\n      })\n    }\n  }\n\n  signup() {\n    this.navCtrl.push('SignupPage');\n  }\n\n  facebookLogin() {\n\n\n\n\n    this.fb.login(['public_profile', 'email'])\n      .then((res: FacebookLoginResponse) => {\n        if (res.status === \"connected\") {\n          this.loading1.present();\n          //alert('hello2')\n          this.isLoggedIn = true;\n          this.getUserDetail(res.authResponse.userID);\n          //alert('hello3')\n          console.log(res.authResponse)\n          //console.log(\"data fb\",this.fbUserId,this.fbEmail,this.fbUserName)\n\n        } else {\n          this.isLoggedIn = false;\n        }\n      })\n      .catch(e => console.log('Error logging into Facebook', e));\n\n  }\n\n  getUserDetail(userid) {\n    //alert(userid +'hello4');\n    this.fb.api(\"/\" + userid + \"/?fields=id,email,name,picture,gender\", [\"public_profile\"])\n      .then(res => {\n        console.log(res);\n        this.users = res;\n        console.log('userData', this.users)\n        this.fbEmail = this.users.email;\n        this.fbUserId = userid;\n        this.fbImg = encodeURIComponent(this.users.picture.data.url);\n        //let img = this.fbImg\n        //localStorage.setItem('img',this.fbImg);\n        this.fbUserName = this.users.name;\n        this.fbUserName = this.fbUserName.split(\" \");\n        this.firstname = this.fbUserName[0];\n        this.lastname = this.fbUserName[1];\n\n        console.log(this.fbUserId, this.fbEmail, this.fbImg, this.fbUserName);\n\n\n        let lat = localStorage.getItem('lat');\n        let long = localStorage.getItem('long');\n\n        //this.showLoading()\n\n        this.userServices.fbLogin(this.firstname, this.lastname, this.fbEmail, this.fbUserId, this.fbImg, lat, long).subscribe(userFbData => {\n          console.log(userFbData)\n          if (userFbData.message === 'successfull') {\n            this.loading1.dismiss();\n\n            localStorage.setItem('user_mobile', userFbData.result.phone_number);\n            localStorage.setItem('user_address', userFbData.result.address);\n            localStorage.setItem('user_id', userFbData.result.id);\n            this.events.publish('user_id', userFbData.result.id)\n            this.events.publish('name', userFbData.result.firstname + \" \" + userFbData.result.lastname)\n            this.events.publish('userPic', userFbData.result.image)\n\n            this.navCtrl.setRoot('NursingselectPage');\n          } else if (userFbData.result) {\n            this.showError(userFbData.result);\n          }\n\n          //this.showError('Facebook Login Successfully');\n\n\n        });\n      })\n      .catch(e => {\n        console.log(e);\n      });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/login.ts"],"sourceRoot":""}